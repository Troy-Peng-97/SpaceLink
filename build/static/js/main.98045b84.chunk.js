(this.webpackJsonpstarlink=this.webpackJsonpstarlink||[]).push([[0],{122:function(e,t,a){e.exports=a.p+"static/media/starlink_logo.28756d25.svg"},129:function(e,t,a){e.exports=a.p+"static/media/satellite.141ccf71.svg"},143:function(e,t,a){e.exports=a(245)},148:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(7),i=a.n(s),o=(a(148),a(23)),c=a(24),l=a(26),m=a(25),u=a(122),h=a.n(u),d=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:h.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",{className:"title"},"SpaceLink: The StarLink Tracker"))}}]),a}(n.Component),f=a(136),g=a(94),p=a(46),v=a.n(p),b="https://api.n2yo.com/rest/v1/satellite",E="".concat(b,"/above"),L="".concat(b,"/positions"),w=a(260),j=a(257),N=a(261),k=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onChangeLong=function(t){e.setState({observerLong:t})},e.onChangeLat=function(t){e.setState({observerLat:t})},e.onChangeEle=function(t){e.setState({observerElevation:t})},e.onChangeAlt=function(t){e.setState({satAlt:90-+t})},e.onDurationChange=function(t){e.setState({duration:t})},e.showSatellite=function(){e.props.onShow(e.state)},e.state={observerLat:0,observerLong:0,observerElevation:0,satAlt:90,duration:[0,90]},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.observerLat,a=e.observerLong,n=e.observerElevation,s=e.satAlt,i=e.duration;return r.a.createElement("div",{className:"sat-setting"},r.a.createElement("div",{className:"loc-setting"},r.a.createElement("p",{className:"setting-label"},"From Location"),r.a.createElement("div",{className:"setting-list two-item-col"},r.a.createElement("div",{className:"list-item"},r.a.createElement("label",null,"Longitude: "),r.a.createElement(w.a,{min:-180,max:180,defaultValue:a,style:{margin:"0 2px"},onChange:this.onChangeLong})),r.a.createElement("div",{className:"list-item right-item"},r.a.createElement("label",null,"Latitude: "),r.a.createElement(w.a,{min:-90,max:90,defaultValue:t,style:{margin:"0 2px"},onChange:this.onChangeLat}))),r.a.createElement("div",{className:"setting-list"},r.a.createElement("div",{className:"list-item"},r.a.createElement("label",null,"Elevation(meters):"),r.a.createElement(w.a,{min:-413,max:8850,defaultValue:n,style:{margin:"0 2px"},onChange:this.onChangeEle})))),r.a.createElement("div",{className:"altitude-setting"},r.a.createElement("p",{className:"setting-label"},"Restrictions"),r.a.createElement("div",null,r.a.createElement("span",null,"Show only satellites which are higher than ",r.a.createElement("br",null)," altitude"),r.a.createElement(w.a,{min:0,max:90,defaultValue:90-s,style:{margin:"8px 2px 0"},onChange:this.onChangeAlt}))),r.a.createElement("div",{className:"duration-setting"},r.a.createElement("p",{className:"setting-label"},"Duration(sec):"),r.a.createElement(j.a,{className:"duration-slider",range:!0,step:1,defaultValue:i,min:0,max:90,marks:{0:"0",90:"90"},onChange:this.onDurationChange})),r.a.createElement("div",{className:"show-nearby"},r.a.createElement(N.a,{className:"show-nearby-btn",size:"large",onClick:this.showSatellite},"Find Nearby Satallites")))}}]),a}(n.Component),y=a(130),O=a(255),S=a(262),C=a(252),x=a(129),D=a.n(x),M=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selected:[]},e.showMap=function(){var t=e.state.selected;e.props.onShowMap(t)},e.onChange=function(t){var a=t.target,n=a.dataInfo,r=a.checked,s=e.state.selected,i=e.addOrRemove(n,r,s);e.setState({selected:i})},e.addOrRemove=function(e,t,a){var n=a.some((function(t){return t.satid===e.satid}));return t&&!n&&a.push(e),!t&&n&&(a=a.filter((function(t){return t.satid!==e.satid}))),a},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state.selected,a=this.props,n=a.satInfo,s=a.isLoad,i=n?n.above:[];return r.a.createElement("div",{className:"sat-list-box"},r.a.createElement(N.a,{className:"sat-list-btn",size:"large",disabled:0===t.length,onClick:this.showMap},"Track on the map"),r.a.createElement("hr",null),s?r.a.createElement("div",{className:"spin-box"},r.a.createElement(y.a,{tip:"Loading...",size:"large"})):r.a.createElement(O.a,{className:"sat-list",itemLayout:"horizontal",dataSource:i,renderItem:function(t){return r.a.createElement(O.a.Item,{actions:[r.a.createElement(S.a,{dataInfo:t,onChange:e.onChange})]},r.a.createElement(O.a.Item.Meta,{avatar:r.a.createElement(C.a,{src:D.a,size:"large",alt:"satellite"}),title:r.a.createElement("p",null,t.satname),description:"Launch Date: ".concat(t.launchDate)}))}}))}},{key:"componentDidUpdate",value:function(e,t,a){e.satInfo!==this.props.satInfo&&this.setState({selected:[]})}}]),a}(n.Component),I=a(137),T=a(135),A=a(256),P=a(253),R=a(259),B=a(254),W=a(264),z=a(263),F=a(258),V=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).track=function(t){if(!t[0].hasOwnProperty("positions"))throw new Error("no position data");var a=t[0].positions.length,n=Object(I.a)(e.props.observerData.duration,1)[0],r=e.map.context2,s=new Date,i=n,o=setInterval((function(){var c=Date.now()-s;i===n&&s.setSeconds(s.getSeconds()+60*n);var l=new Date(s.getTime()+60*c);if(r.clearRect(0,0,960,600),r.font="bold 14px sans-serif",r.fillStyle="#333",r.textAlign="center",r.fillText(Object(F.a)(l),480,10),i>=a)return clearInterval(o),e.setState({isDrawing:!1}),void(document.getElementsByClassName("hint")[0].innerHTML="");t.forEach((function(t){var a=t.info,n=t.positions;e.drawSat(a,n[i])})),i+=60}),1e3)},e.drawSat=function(t,a){var n=a.satlongitude,r=a.satlatitude;if(n&&r){var s=t.satname.match(/\d+/g).join(""),i=e.map,o=i.projection,c=i.context2,l=o([n,r]);c.fillStyle=e.color(s),c.beginPath(),c.arc(l[0],l[1],4,0,2*Math.PI),c.fill(),c.font="bold 11px sans-serif",c.textAlign="center",c.fillText(s,l[0],l[1]+14)}},e.generateMap=function(t){var a=Object(A.a)().scale(170).translate([480,300]).precision(.1),n=Object(P.a)(),r=Object(B.a)(e.refMap.current).attr("width",960).attr("height",600),s=Object(B.a)(e.refTrack.current).attr("width",960).attr("height",600),i=r.node().getContext("2d"),o=s.node().getContext("2d"),c=Object(R.a)().projection(a).context(i);t.forEach((function(e){i.fillStyle="#B3DDEF",i.strokeStyle="#000",i.globalAlpha=.7,i.beginPath(),c(e),i.fill(),i.stroke(),i.strokeStyle="rgba(220, 220, 220, 0.1)",i.beginPath(),c(n()),i.lineWidth=.1,i.stroke(),i.beginPath(),i.lineWidth=.5,c(n.outline()),i.stroke()})),e.map={projection:a,graticule:n,context:i,context2:o}},e.state={isLoading:!1,isDrawing:!1},e.map=null,e.color=z.a(W.a),e.refMap=r.a.createRef(),e.refTrack=r.a.createRef(),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("https://unpkg.com/world-atlas@1/world/110m.json").then((function(t){var a=t.data,n=Object(T.a)(a,a.objects.countries).features;e.generateMap(n)})).catch((function(e){console.log("err in fetch map data ",e.message)}))}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(e.satData!==this.props.satData){var r=this.props.observerData,s=r.observerLat,i=r.observerLong,o=r.duration,c=r.observerElevation,l=60*o[1];this.setState({isLoading:!0});var m=this.props.satData.map((function(e){var t=e.satid,a="".concat(L,"/").concat(t,"/").concat(s,"/").concat(i,"/").concat(c,"/").concat(l,"/&apiKey=").concat("EN6ZLB-TMC4TW-NMLGF9-4IIG");return v.a.get(a)}));v.a.all(m).then(v.a.spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.map((function(e){return e.data}))}))).then((function(e){(n.setState({isLoading:!1,isDrawing:!0}),t.isDrawing)?document.getElementsByClassName("hint")[0].innerHTML="Please wait for these satellite animation to finish before selection new ones!":n.track(e)})).catch((function(e){console.log("err in fetch satellite position -> ",e.message)}))}}},{key:"render",value:function(){var e=this.state.isLoading;return r.a.createElement("div",{className:"map-box"},e?r.a.createElement("div",{className:"spinner"},r.a.createElement(y.a,{tip:"Loading...",size:"large"})):null,r.a.createElement("canvas",{className:"map",ref:this.refMap}),r.a.createElement("canvas",{className:"track",ref:this.refTrack}),r.a.createElement("div",{className:"hint"}))}}]),a}(n.Component),G=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).showMap=function(t){e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{satList:Object(f.a)(t)})}))},e.showNearbySatellite=function(t){e.setState({isLoadingList:!0,setting:t}),e.fetchSatellite(t)},e.fetchSatellite=function(t){var a=t.observerLat,n=t.observerLong,r=t.observerElevation,s=t.satAlt,i="".concat(E,"/").concat(a,"/").concat(n,"/").concat(r,"/").concat(s,"/").concat("52","&apiKey=").concat("EN6ZLB-TMC4TW-NMLGF9-4IIG");v.a.get(i).then((function(t){console.log(t),e.setState({satInfo:t.data,isLoadingList:!1})})).catch((function(e){console.log("fetch satellite failed -> ",e.message)}))},e.state={satInfo:null,satList:null,setting:null,isLoadingList:!1},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isLoadingList,a=e.satInfo,n=e.satList,s=e.setting;return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"left-side"},r.a.createElement(k,{onShow:this.showNearbySatellite}),r.a.createElement(M,{isLoad:t,satInfo:a,onShowMap:this.showMap})),r.a.createElement("div",{className:"right-side"},r.a.createElement(V,{satData:n,observerData:s})))}}]),a}(n.Component),H=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer"},"\xa92020 StarLink Tracker. All Rights Reserved. Website Made by Qiankun Peng")}}]),a}(n.Component);var J=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(G,null),r.a.createElement(H,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[143,1,2]]]);
//# sourceMappingURL=main.98045b84.chunk.js.map